#!/bin/bash
# Run the container in the current directory.

. ./shared/libs/container.sh

internalModelPath="/opt/stable-diffusion-webui/models"

checkModelPath
createCache

set -x
docker run --rm -it --name "$containerName" --device=/dev/kfd --device=/dev/dri --group-add video --ipc=host --security-opt seccomp=unconfined -v "$modelPath:$internalModelPath:z" -v "$optDir:/opt:z" -v .:/inside:z "$containerName"


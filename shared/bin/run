#!/bin/bash
# Run the container in the current directory.

. ./shared/libs/container.sh

internalModelPath="/opt/stable-diffusion-webui/models"

CMD="${1:-/bin/bash}"

checkModelPath
createCache

set -x
docker run --rm -it --entrypoint "$CMD" --name "$containerName" --device=/dev/kfd --device=/dev/dri --group-add video --ipc=host --security-opt seccomp=unconfined -v "$modelPath:$internalModelPath:z" -v "$homeDir:/home:z" -v "$workspaceDir:/workspace:z" -v .:/inside:z "$containerName"

# -v "$optDir:/opt:z"

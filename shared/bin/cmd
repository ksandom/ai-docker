#!/bin/bash
# Run the container in the current directory.

. ./shared/libs/container.sh

checkModelPath
createCache

set -x
# TODO Make this more elegant.
if ! docker exec -it "$containerName" -v "$modelPath:$internalModelPath" -v "$optDir:/opt/ai" -v .:/opt/docker /bin/bash; then
    #docker run -it "$containerName" -v "$modelPath:$internalModelPath" -v "$optDir:/opt" -v .:/docker /bin/bash
    #docker run -it --entrypoint /bin/bash -v "$modelPath:$internalModelPath" -v "$optDir:/opt/ai" -v .:/opt/docker  "$containerName"
    docker run -it --entrypoint /bin/bash -p "$port:$port" -v "$modelPath:$internalModelPath" -v "$optDir:/opt" -v .:/workspace "$containerName"
fi
